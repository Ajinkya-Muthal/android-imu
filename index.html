<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <title>Android IMU</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
        <link rel="stylesheet" href="assets/css/jquery.mobile.css"/>
        <link rel="stylesheet" href="assets/css/jquery.mobile.structure.css"/>
        <link rel="stylesheet" href="assets/css/unusid.css"/>

        <script type="text/javascript" charset="utf-8" src="assets/js/translate.js"></script>
        <script type="text/javascript" charset="utf-8" src="assets/js/jquery.js"></script>
        <!--<script type="text/javascript" charset="utf-8" src="assets/js/aundroid-imu.js"></script>-->
        <script type="text/javascript" charset="utf-8" src="assets/js/jquery.mobile.js"></script>
        <script type="text/javascript" charset="utf-8" src="assets/js/jquery-ui.js"></script>
        <!--<script type="text/javascript" charset="utf-8" src="assets/js/fields_validation.js"></script>-->

        <script src="phonegap.js"></script>
        <!-- script type="text/javascript" charset="utf-8" src="assets/js/cordova.js"></script -->
        <!-- script type="text/javascript" charset="utf-8" src="assets/js/globalization.js"></script -->

    </head>
    <body>
        <div data-role="page" id="start">
            <div data-role="content" style="text-align: center; margin-top:50px;">
                <input id="freq" type="number" value="1000"/>

                <div id="navContainer" style="" >App is up</div>

            </div>
        </div>

    </body>

    <script type="text/javascript" charset="utf-8">

        var app = {
            watchAcc: null
        };
    
        //
        // Wait for PhoneGap to load
        // -------------------------

        document.addEventListener( "deviceready", device_ready, false );

        //
        // device_ready()
        // ------------
        // PhoneGap is ready translate page
        // --------------------------------
        function device_ready()
        {
            //app.alert("ready");
            $("#freq").change(SetupAccWatch);
            SetupAccWatch();
        }

        function SetupAccWatch()
        {
            var options = { frequency: $("#freq").val() };  
            if (app.watchAcc != null)
                navigator.accelerometer.clearWatch(app.watchAcc);
            
            app.watchAcc = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
       
        }
       
        //
        // unusid_app.alert
        //

        app.alert = function( message, title )
        {
            navigator.notification.vibrate( 2000 );
            navigator.notification.beep( 1 );
            navigator.notification.alert( message, function(){}, title );
        }

        function onSuccess(acceleration) {
            str = 'Acceleration X: ' + acceleration.x + '<br>' +
                'Acceleration Y: ' + acceleration.y + '<br>' +
                'Acceleration Z: ' + acceleration.z + '<br>' +
                'Timestamp: '      + acceleration.timestamp;
            
            $("#navContainer").html(str);
        };

        function onError() {
            $("#navContainer").html("Error");
        };

        

    </script>
</html>